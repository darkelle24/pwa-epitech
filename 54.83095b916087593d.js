"use strict";(self.webpackChunkclepsydre_front=self.webpackChunkclepsydre_front||[]).push([[54],{6054:(rt,I,a)=>{a.r(I),a.d(I,{OneClotheModule:()=>at});var w=a(5349),D=a(858),t=a(4650),k=a(4128),M=a(262),P=a(9646),l=a(4766),U=a(1481),Z=a(5698),E=a(4004),g=a(8505),d=a(3151),h=a(5412),Q=a(7579),p=a(6895),m=a(4859),f=a(7392);const J=["video"],F=["canvas"];function N(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.rotateVideoInput(!0))}),t.qZA()}}class v{constructor(s,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=s,this._imageData=i}static getDataFromDataUrl(s,e){return s.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=v.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}let _=(()=>{class o{constructor(){this.width=640,this.height=480,this.videoOptions=o.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=o.DEFAULT_IMAGE_TYPE,this.imageQuality=o.DEFAULT_IMAGE_QUALITY,this.imageCapture=new t.vpe,this.initError=new t.vpe,this.imageClick=new t.vpe,this.cameraSwitched=new t.vpe,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(e){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=e.subscribe(()=>{this.takeSnapshot()})}set switchCamera(e){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=e.subscribe(i=>{"string"==typeof i?this.switchToVideoInput(i):this.rotateVideoInput(!1!==i)})}static getMediaConstraintsForDevice(e,i){const n=i||this.DEFAULT_VIDEO_OPTIONS;return e&&(n.deviceId={exact:e}),n}static getDeviceIdFromMediaStreamTrack(e){if(e.getSettings&&e.getSettings()&&e.getSettings().deviceId)return e.getSettings().deviceId;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().deviceId){const i=e.getConstraints().deviceId;return o.getValueFromConstrainDOMString(i)}}static getFacingModeFromMediaStreamTrack(e){if(e){if(e.getSettings&&e.getSettings()&&e.getSettings().facingMode)return e.getSettings().facingMode;if(e.getConstraints&&e.getConstraints()&&e.getConstraints().facingMode){const i=e.getConstraints().facingMode;return o.getValueFromConstrainDOMString(i)}}}static isUserFacing(e){const i=o.getFacingModeFromMediaStreamTrack(e);return!!i&&"user"===i.toLowerCase()}static getValueFromConstrainDOMString(e){if(e){if(e instanceof String)return String(e);if(Array.isArray(e)&&Array(e).length>0)return String(e[0]);if("object"==typeof e){if(e.exact)return String(e.exact);if(e.ideal)return String(e.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(e=>{this.initError.next({message:e}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const e=this.nativeVideoElement,i={width:this.width,height:this.height};e.videoWidth&&(i.width=e.videoWidth,i.height=e.videoHeight);const n=this.canvas.nativeElement;n.width=i.width,n.height=i.height;const r=n.getContext("2d");r.drawImage(e,0,0);const c=this.imageType?this.imageType:o.DEFAULT_IMAGE_TYPE,x=n.toDataURL(c,this.imageQuality?this.imageQuality:o.DEFAULT_IMAGE_QUALITY);let O=null;this.captureImageData&&(O=r.getImageData(0,0,n.width,n.height)),this.imageCapture.next(new v(x,c,O))}rotateVideoInput(e){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(e?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(e){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(e,this.videoOptions)}videoResize(){}get videoWidth(){const e=this.getVideoAspectRatio();return Math.min(this.width,this.height*e)}get videoHeight(){const e=this.getVideoAspectRatio();return Math.min(this.height,this.width/e)}get videoStyleClasses(){let e="";return this.isMirrorImage()&&(e+="mirrored "),e.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const e=this.nativeVideoElement;return e.videoWidth&&e.videoWidth>0&&e.videoHeight&&e.videoHeight>0?e.videoWidth/e.videoHeight:this.width/this.height}initWebcam(e,i){const n=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const r=o.getMediaConstraintsForDevice(e,i);navigator.mediaDevices.getUserMedia({video:r}).then(c=>{this.mediaStream=c,n.srcObject=c,n.play(),this.activeVideoSettings=c.getVideoTracks()[0].getSettings();const u=o.getDeviceIdFromMediaStreamTrack(c.getVideoTracks()[0]);this.cameraSwitched.next(u),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=u?this.availableVideoInputs.findIndex(x=>x.deviceId===u):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(c=>{this.initError.next({message:c.message,mediaStreamError:c})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let e="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?e=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(e=this.mirrorImage.x.toLowerCase())),e){case"always":return!0;case"never":return!1}}return o.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(e=>e.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((e,i)=>{(class V{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((s,e)=>{navigator.mediaDevices.enumerateDevices().then(i=>{s(i.filter(n=>"videoinput"===n.kind))}).catch(i=>{e(i.message||i)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(n=>{this.availableVideoInputs=n,e(n)}).catch(n=>{this.availableVideoInputs=[],i(n)})})}}return o.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},o.DEFAULT_IMAGE_TYPE="image/jpeg",o.DEFAULT_IMAGE_QUALITY=.92,o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["webcam"]],viewQuery:function(e,i){if(1&e&&(t.Gf(J,7),t.Gf(F,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.video=n.first),t.iGM(n=t.CRH())&&(i.canvas=n.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.imageClick.next()}),t.TgZ(1,"video",1,2),t.NdJ("resize",function(){return i.videoResize()}),t.qZA(),t.YNc(3,N,1,0,"div",3),t._UZ(4,"canvas",4,5),t.qZA()),2&e&&(t.xp6(1),t.Tol(i.videoStyleClasses),t.Q6J("width",i.videoWidth)("height",i.videoHeight),t.xp6(2),t.Q6J("ngIf",i.allowCameraSwitch&&i.availableVideoInputs.length>1&&i.videoInitialized),t.xp6(1),t.Q6J("width",i.width)("height",i.height))},dependencies:[p.O5],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),o})(),L=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez]]}),o})();function Y(o,s){if(1&o&&(t.TgZ(0,"h1",11),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Modify Clothe ",e.data.clothe.name,"")}}function z(o,s){1&o&&(t.TgZ(0,"h1",11),t._uU(1,"Create new Clothe"),t.qZA())}function R(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"webcam",12),t.NdJ("imageCapture",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.snapshot(n))}),t.qZA(),t.TgZ(2,"button",13),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.captureImage())}),t._uU(3),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("trigger",e.$trigger)("imageQuality",1),t.xp6(2),t.Oqu(e.btnLabel)}}function G(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij("Status here: ",e.status,"")}}function B(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"button",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.checkPermissions())}),t._uU(2,"Check the webcam permissions"),t.qZA(),t.YNc(3,G,2,1,"p",7),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.status)}}let H=(()=>{class o{constructor(e,i,n,r){this.data=e,this.service=i,this.mdDialogRef=n,this.changeDetectionRef=r,this.isLoading=!1,this.stream=null,this.status=null,this.trigger=new Q.x,this.previewImage="",this.btnLabel="Capture image"}ngOnInit(){this.checkPermissions()}get $trigger(){return this.trigger.asObservable()}snapshot(e){console.log(e),this.previewImage=e.imageAsBase64,this.btnLabel="Re capture image"}checkPermissions(){navigator.mediaDevices.getUserMedia({video:{width:300,height:300}}).then(e=>{console.log("response",e),this.stream=e,this.status="My camera is accessing",this.btnLabel="Capture image"}).catch(e=>{console.log(e),this.status="Permission denied"===e?.message?"Permission denied please try again by approving the access":"You may not having camera system, Please try again ..."})}captureImage(){this.trigger.next()}proceed(){console.log(this.previewImage)}cancel(){this.close()}close(e){this.mdDialogRef.close(e)}confirm(){this.close()}onEsc(){this.close()}onSubmit(){this.isLoading=!0,this.changeDetectionRef.detectChanges(),console.log("go"),this.service.saveImage(this.previewImage,this.data.clothe.id).subscribe({next:e=>{this.isLoading=!1,console.log(e)},error:e=>{this.isLoading=!1,this.changeDetectionRef.detectChanges()}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.WI),t.Y36(b),t.Y36(h.so),t.Y36(t.sBO))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-photo-dialog"]],hostBindings:function(e,i){1&e&&t.NdJ("keydown.esc",function(){return i.onEsc()})},decls:17,vars:5,consts:[[1,"mat-dialog-div"],[1,"mat-dialog-body"],[1,"mat-dialog-header"],["mat-dialog-title","",4,"ngIf"],[1,"closeButton"],["mat-icon-button","","tabindex","-1",3,"click"],["mat-dialog-content",""],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","",1,"submitButton",2,"background-color","green","border","none!important",3,"disabled","click"],["mat-stroked-button","",2,"background-color","red","border","none!important",3,"click"],["mat-dialog-title",""],[3,"trigger","imageQuality","imageCapture"],[3,"click"],["mat-raised-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,Y,2,1,"h1",3),t.YNc(4,z,2,0,"h1",3),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return i.cancel()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA()()()(),t.TgZ(9,"div",6),t.YNc(10,R,4,3,"div",7),t.YNc(11,B,4,1,"div",7),t.qZA()(),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){return i.onSubmit()}),t._uU(14,"Save"),t.qZA(),t.TgZ(15,"button",10),t.NdJ("click",function(){return i.cancel()}),t._uU(16,"Cancel"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.data.clothe),t.xp6(1),t.Q6J("ngIf",!i.data.clothe),t.xp6(6),t.Q6J("ngIf",i.stream),t.xp6(1),t.Q6J("ngIf",!i.stream),t.xp6(2),t.Q6J("disabled",!i.stream))},dependencies:[p.O5,h.uh,h.xY,h.H8,m.lW,f.Hw,_],styles:[".formulaire[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:1rem!important}.selectModelPlaceholder[_ngcontent-%COMP%]     .mat-select-placeholder{color:var(--text-default)!important}"],changeDetection:0}),o})();var C=a(529),T=a(7185);let b=(()=>{class o{constructor(e,i,n){this.dialog=e,this.http=i,this.toastr=n}open(e){this.dialogRef=this.dialog.open(H,{data:e,width:"400px"})}confirmed(){return this.dialogRef.afterClosed().pipe((0,Z.q)(1),(0,E.U)(e=>e))}saveImage(e,i){const n=new FormData;return n.append("picture",e),console.log("go"),this.http.put(l.N.apiUrl+"/clothes/"+i+"/picture",n).pipe((0,g.b)({next:r=>{(0,t.X6Q)()&&console.log(r)},error:r=>{if(r.error&&r.error.message)return console.error(r),void this.toastr.error(r.status+" "+r.statusText+": "+r.error.message);this.toastr.error(r.message)}}),(0,d.d)())}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(h.uw),t.LFG(C.eN),t.LFG(T._W))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})();var W=a(4985);let S=(()=>{class o{constructor(e,i){this.http=e,this.toastr=i}getOneClothe(e){return this.http.get(l.N.apiUrl+"/clothes/"+e).pipe((0,g.b)({next:i=>{(0,t.X6Q)()&&console.log(i)},error:i=>{if(i.error&&i.error.message)return console.error(i),void this.toastr.error(i.status+" "+i.statusText+": "+i.error.message);this.toastr.error(i.message)}}),(0,d.d)())}getlike(){return this.http.get(l.N.apiUrl+"/users/me/like").pipe((0,g.b)({next:e=>{(0,t.X6Q)()&&console.log(e)},error:e=>{if(e.error&&e.error.message)return console.error(e),void this.toastr.error(e.status+" "+e.statusText+": "+e.error.message);this.toastr.error(e.message)}}),(0,d.d)())}dislike(e,i){return this.http.put(l.N.apiUrl+"/users/me/dislike/"+e,{}).pipe((0,g.b)({next:n=>{(0,t.X6Q)()&&console.log(n),this.toastr.success("Dislike clothe "+i)},error:n=>{if(n.error&&n.error.message)return console.error(n),void this.toastr.error(n.status+" "+n.statusText+": "+n.error.message);this.toastr.error(n.message)}}),(0,d.d)())}like(e,i){return this.http.put(l.N.apiUrl+"/users/me/like/"+e,{}).pipe((0,g.b)({next:n=>{(0,t.X6Q)()&&console.log(n),this.toastr.success("Like clothe "+i)},error:n=>{if(n.error&&n.error.message)return console.error(n),void this.toastr.error(n.status+" "+n.statusText+": "+n.error.message);this.toastr.error(n.message)}}),(0,d.d)())}order(e,i){return this.http.put(l.N.apiUrl+"/clothes/"+e+"/order",{}).pipe((0,g.b)({next:n=>{(0,t.X6Q)()&&console.log(n),this.toastr.success("Order clothe "+i)},error:n=>{if(n.error&&n.error.message)return console.error(n),void this.toastr.error(n.status+" "+n.statusText+": "+n.error.message);this.toastr.error(n.message)}}),(0,d.d)())}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(C.eN),t.LFG(T._W))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=a(1572);function j(o,s){1&o&&t._UZ(0,"mat-spinner",7)}function q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.update())}),t._uU(1,"Update"),t.qZA()}}function X(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.openPhoto())}),t._uU(1,"Change image with photo"),t.qZA()}}function K(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",8)(2,"div",9),t._UZ(3,"img",10),t.qZA(),t.TgZ(4,"div",11)(5,"span",12),t._uU(6),t.qZA(),t.TgZ(7,"span",13)(8,"span",14),t._uU(9),t.qZA(),t._uU(10," clothe available"),t.qZA(),t.TgZ(11,"span",15),t._uU(12),t.TgZ(13,"span",16),t._uU(14," \u20ac"),t.qZA()()(),t.TgZ(15,"div",17)(16,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.handleFav())}),t._uU(17),t.qZA(),t.YNc(18,q,2,0,"button",19),t.YNc(19,X,2,0,"button",19),t.TgZ(20,"button",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.order())}),t._uU(21,"Order"),t.qZA()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("src",e.getImageUrl(),t.LSH),t.xp6(3),t.Oqu(e.clothe.name),t.xp6(3),t.Oqu(e.clothe.clotheAvaible),t.xp6(3),t.Oqu(e.clothe.unitPrice),t.xp6(5),t.Oqu(e.clothe.fav?"Dislike":"Like"),t.xp6(1),t.Q6J("ngIf",e.checkSame()),t.xp6(1),t.Q6J("ngIf",e.checkSame()),t.xp6(1),t.Q6J("disabled",e.clothe.clotheAvaible<=0)}}function $(o,s){1&o&&(t.ynx(0),t.TgZ(1,"h1"),t._uU(2,"Clothe not found"),t.qZA(),t.BQk())}const tt=[{path:"",component:(()=>{class o{constructor(e,i,n,r,c){this.titleService=e,this.photoDialogService=i,this.clotheDialogService=n,this.service=r,this.activatedRoute=c,this.isLoading=!0,this.clothe=void 0}ngOnInit(){this.titleService.setTitle("Clothe | PWA Epitech"),this.sub=this.activatedRoute.params.subscribe(e=>{(0,t.X6Q)()&&console.log(e),this.getData(e.clotheID),this.id=e.clotheID})}getData(e){this.isLoading=!0,(0,k.D)({clothe:this.service.getOneClothe(e),like:this.service.getlike()}).pipe((0,M.K)(i=>(0,P.of)(i))).subscribe({next:i=>{i.clothe.fav=!!i.like.find(r=>r.id===i.clothe.id),this.clothe=i.clothe,this.titleService.setTitle("Clothe "+this.clothe.name+" | PWA Epitech"),this.isLoading=!1},error:i=>{this.clothe=void 0,this.isLoading=!1}})}getImageUrl(){return this.clothe.picture&&this.clothe.picture.id?l.N.apiUrl+"/files/show/"+this.clothe.picture.id:""}handleFav(){this.clothe.fav?this.service.dislike(this.clothe.id,this.clothe.name).subscribe({next:e=>{this.clothe.fav=!1},error:e=>{}}):this.service.like(this.clothe.id,this.clothe.name).subscribe({next:e=>{this.clothe.fav=!0},error:e=>{}})}order(){this.service.order(this.clothe.id,this.clothe.name).subscribe({next:e=>{let i=this.clothe.fav;this.clothe=e,this.clothe.fav=i},error:e=>{}})}update(){this.clotheDialogService.open({clothe:this.clothe}),this.clotheDialogService.confirmed().subscribe({next:e=>{if(e){let i=this.clothe.fav;this.clothe=e,this.clothe.fav=i}}})}checkSame(){return JSON.parse(localStorage.getItem(l.N.projectName+"_info")).id===this.clothe.id}openPhoto(){this.photoDialogService.open({clothe:this.clothe}),this.photoDialogService.confirmed().subscribe({next:e=>{if(e){let i=this.clothe.fav;this.clothe=e,this.clothe.fav=i}}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.Dx),t.Y36(b),t.Y36(W.C),t.Y36(S),t.Y36(D.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-one-clothe"]],decls:10,vars:3,consts:[[1,"page","list"],[1,"titlebox"],[1,"title"],[1,"subtitle"],[1,"loadingBox"],["diameter","100",4,"ngIf"],[4,"ngIf"],["diameter","100"],[1,"clothe"],[1,"imgDiv"],["alt","",1,"img",3,"src"],[1,"clotheInfoDiv"],[1,"name"],[1,"dispo"],[1,"realDispo"],[1,"price"],[1,"priceInfo"],[1,"action"],["mat-raised-button","","color","primary",1,"like",3,"click"],["mat-raised-button","","color","primary","class","Update",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"order",3,"disabled","click"],["mat-raised-button","","color","primary",1,"Update",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"List of Clothe"),t.qZA(),t.TgZ(4,"div",3),t._uU(5,"List all of clothe available"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,j,1,0,"mat-spinner",5),t.qZA(),t.YNc(8,K,22,8,"ng-container",6),t.YNc(9,$,3,0,"ng-container",6),t.qZA()),2&e&&(t.xp6(7),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&i.clothe),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&!i.clothe))},dependencies:[p.O5,m.lW,A.Ou],styles:[".list[_ngcontent-%COMP%]{display:flex;gap:24px;flex-direction:column}.clothe[_ngcontent-%COMP%]{--tw-text-opacity: 1 !important;color:rgba(var(--text-default-rgb),var(--tw-text-opacity))!important;--tw-bg-opacity: 1 !important;background-color:rgba(var(--bg-extansion-bar-rgb),var(--tw-bg-opacity))!important;border-radius:4px;display:flex}.favButtonDiv[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px}.name[_ngcontent-%COMP%]{font-size:1rem!important;font-weight:500!important;line-height:1.5rem!important;letter-spacing:-.025em!important;margin-top:2px}.imgDiv[_ngcontent-%COMP%]{position:relative;height:400px}.img[_ngcontent-%COMP%]{width:auto;height:400px;border-radius:4px}.clotheInfoDiv[_ngcontent-%COMP%]{padding:14px 24px;display:flex;flex-direction:column;font-size:15px;line-height:19px;gap:5px;align-items:flex-start;justify-content:space-around}.name[_ngcontent-%COMP%]{overflow:clip;line-height:inherit;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;font-weight:600;word-break:break-all;font-size:15px}.dispo[_ngcontent-%COMP%]   .realDispo[_ngcontent-%COMP%]{font-weight:600!important;font-size:15px}.price[_ngcontent-%COMP%]{align-items:baseline!important;font-weight:600!important;font-size:15px}.price[_ngcontent-%COMP%]   .priceInfo[_ngcontent-%COMP%]{font-family:Montserrat;font-style:normal;font-weight:400!important}.action[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}"]}),o})()}];var y=a(7175),et=a(8059),it=a(9549),ot=a(4144),nt=a(4385);let st=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[b],imports:[w.m,h.Is,m.ot,f.Ps,it.lN,ot.c,nt.LD,A.Cq,y.Q,L]}),o})(),at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[S],imports:[w.m,m.ot,C.JF,f.Ps,A.Cq,y.Q,et.K,st,D.Bz.forChild(tt)]}),o})()}}]);