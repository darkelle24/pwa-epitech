"use strict";(self.webpackChunkclepsydre_front=self.webpackChunkclepsydre_front||[]).push([[522],{2522:(A,u,r)=>{r.r(u),r.d(u,{LoginModule:()=>F});var f=r(5349),m=r(858),a=r(4006),t=r(4650),h=r(1481),v=r(5670),y=r(6895),s=r(9549),d=r(4859),c=r(4144),g=r(7392),p=r(1572);function L(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter an username or an email "),t.qZA())}function Z(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a password "),t.qZA())}function C(e,i){1&e&&(t.TgZ(0,"button",15),t._uU(1,"Login"),t.qZA())}function T(e,i){1&e&&t._UZ(0,"mat-spinner",16)}const b=function(e){return{redirectURL:e}};let M=(()=>{class e{constructor(o,n,l,I){this.router=o,this.titleService=n,this.AuthSevice=l,this._activatedRoute=I,this.isLoading=!1,this.hide=!0,this.Form=new a.cw({email:new a.NI(void 0,[a.kI.required]),password:new a.NI(void 0,[a.kI.required])}),this.matcher=new U}ngOnInit(){this.titleService.setTitle("Login | PWA Epitech")}getQuerry(){return this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/"}login(){!this.Form.valid||(this.isLoading=!0,this.AuthSevice.login(this.Form.controls.email.value,this.Form.controls.password.value).subscribe({next:o=>{this.isLoading=!1;const n=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/";this.router.navigateByUrl(n)},error:o=>{this.isLoading=!1}}))}goTo(o){this.router.navigate([o])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.F0),t.Y36(h.Dx),t.Y36(v.g),t.Y36(m.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:28,vars:15,consts:[[1,"page-login"],[1,"login","page"],[1,"center"],[1,"title"],["id","myForm",1,"formulaire",3,"formGroup","ngSubmit"],["appearance","standard","color","white",1,"form",2,"font-size","15px"],["matInput","","placeholder","Ex. pat@example.com","type","name","autocomplete","on","name","username","required","",3,"errorStateMatcher","formControl"],[4,"ngIf"],["matInput","","autocomplete","on","name","current-password","required","",3,"type","formControl"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","class","login-butt","type","submit","form","myForm",4,"ngIf"],[2,"display","flex","justify-content","center","align-items","center"],["diameter","30",4,"ngIf"],[1,"to-register"],["routerLink","/register",3,"queryParams"],["mat-raised-button","","type","submit","form","myForm",1,"login-butt"],["diameter","30"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4,"LOGIN"),t.qZA()(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return n.login()}),t.TgZ(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Username or Email"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,L,2,0,"mat-error",7),t.qZA(),t.TgZ(11,"mat-form-field",5)(12,"mat-label"),t._uU(13,"Password"),t.qZA(),t._UZ(14,"input",8),t.TgZ(15,"button",9),t.NdJ("click",function(){return n.hide=!n.hide}),t.TgZ(16,"mat-icon"),t._uU(17),t.qZA()(),t.YNc(18,Z,2,0,"mat-error",7),t.qZA(),t.TgZ(19,"div",2),t.YNc(20,C,2,0,"button",10),t.TgZ(21,"div",11),t.YNc(22,T,1,0,"mat-spinner",12),t.qZA()()(),t.TgZ(23,"div",13)(24,"span"),t._uU(25,"Need to create an "),t.TgZ(26,"a",14),t._uU(27," account"),t.qZA()()()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",n.Form),t.xp6(4),t.Q6J("errorStateMatcher",n.matcher)("formControl",n.Form.controls.email),t.xp6(1),t.Q6J("ngIf",n.Form.controls.email.hasError("required")),t.xp6(4),t.Q6J("type",n.hide?"password":"text")("formControl",n.Form.controls.password),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",n.hide),t.xp6(2),t.Oqu(n.hide?"visibility_off":"visibility"),t.xp6(1),t.Q6J("ngIf",n.Form.controls.password.hasError("required")),t.xp6(2),t.Q6J("ngIf",!n.isLoading),t.xp6(2),t.Q6J("ngIf",n.isLoading),t.xp6(4),t.Q6J("queryParams",t.VKq(13,b,n.getQuerry())))},dependencies:[y.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,s.TO,s.KE,s.hX,s.R9,d.lW,c.Nt,g.Hw,p.Ou,m.yS],styles:[".login[_ngcontent-%COMP%]{width:25vw}.form[_ngcontent-%COMP%]{width:100%}.center[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center}.title[_ngcontent-%COMP%]{margin-bottom:0}.login-butt[_ngcontent-%COMP%]{width:50%;margin-top:1.25em}.to-register[_ngcontent-%COMP%]{margin-top:1em;color:var(--text_color_sec)}a[_ngcontent-%COMP%]{color:var(--text_color)!important}.page-login[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}"]}),e})();class U{isErrorState(i,o){return!!(i&&i.invalid&&(i.dirty||i.touched||o&&o.submitted))}}const P=[{path:"",component:M}];let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.m,s.lN,d.ot,c.c,g.Ps,p.Cq,m.Bz.forChild(P)]}),e})()}}]);